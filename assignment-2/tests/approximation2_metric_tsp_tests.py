import io
import unittest
from graph.graph import Graph, read_tsp_graph
from graph.prim_priority_queue import prim_priority_queue

from algorithms.approximation2_metric_tsp import preorder_visit


class Approximation2Test(unittest.TestCase):
    def test_preoder_visit(self):
        g = Graph(
            [
                (1, 22, 46.09772228646444),
                (1, 49, 64.03124237432849),
                (49, 32, 50.0),
                (49, 36, 81.39410298049853),
                (36, 35, 15.0),
                (35, 34, 21.213203435596427),
                (36, 39, 43.01162633521314),
                (39, 40, 42.720018726587654),
                (40, 38, 35.35533905932738),
                (40, 37, 41.23105625617661),
                (38, 24, 44.721359549995796),
                (24, 48, 15.811388300841896),
                (24, 5, 31.622776601683793),
                (5, 15, 25.0),
                (5, 6, 35.35533905932738),
                (6, 4, 69.6419413859206),
                (34, 44, 80.0),
                (22, 31, 104.4030650891055),
                (31, 18, 80.15609770940699),
                (4, 25, 109.20164833920778),
                (48, 46, 125.0),
                (44, 16, 132.38202294873727),
                (16, 50, 130.38404810405297),
                (50, 20, 35.35533905932738),
                (20, 23, 94.33981132056604),
                (18, 3, 134.6291201783626),
                (31, 21, 150.0),
                (32, 45, 151.32745950421557),
                (45, 19, 75.0),
                (19, 41, 91.92388155425118),
                (41, 8, 64.03124237432849),
                (23, 30, 179.2344832893492),
                (8, 10, 180.34688796871433),
                (10, 9, 83.21658488546619),
                (50, 29, 191.3765920900464),
                (3, 17, 217.3131381210073),
                (15, 43, 241.8677324489565),
                (25, 12, 245.0),
                (12, 28, 182.4828759089466),
                (28, 27, 110.11357772772621),
                (27, 26, 126.19429464123962),
                (27, 13, 185.06755523321746),
                (26, 47, 185.53975315279473),
                (12, 51, 188.2153022471871),
                (13, 14, 205.54804791094466),
                (13, 52, 278.65749586185547),
                (51, 11, 285.0438562747845),
                (21, 42, 289.9137802864845),
                (42, 7, 76.15773105863909),
                (7, 2, 45.0),
                (43, 33, 365.0),
            ]
        )
        r = 1

        print(g.adj_list)

        current = preorder_visit(g, r)
        expected = [
            1,
            22,
            31,
            18,
            3,
            17,
            21,
            42,
            7,
            2,
            49,
            32,
            45,
            19,
            41,
            8,
            10,
            9,
            36,
            35,
            34,
            44,
            16,
            50,
            20,
            23,
            30,
            29,
            39,
            40,
            38,
            24,
            48,
            46,
            5,
            15,
            43,
            33,
            6,
            4,
            25,
            12,
            28,
            27,
            26,
            47,
            13,
            14,
            52,
            51,
            11,
            37,
        ]

        self.assertEqual(expected, current)


if __name__ == "__main__":
    unittest.main()
